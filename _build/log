# dune test
# OCAMLPARAM: unset
# Shared cache: disabled
# Shared cache location: /home/ferramenta/.cache/dune/db
# Workspace root: /home/ferramenta/Documents/personal/ahrefs/chat_ocaml
# Auto-detected concurrency: 12
# Dune context:
#  { name = "default"
#  ; kind = "default"
#  ; profile = Dev
#  ; merlin = true
#  ; fdo_target_exe = None
#  ; build_dir = In_build_dir "default"
#  ; instrument_with = []
#  }
$ /home/ferramenta/.opam/5.0.0/bin/ocamlc.opt -config > /tmp/dune_aa4dc2_output
$ (cd _build/default && /home/ferramenta/.opam/5.0.0/bin/ocamldep.opt -modules -impl test/chat_tests.ml) > _build/default/test/.test.eobjs/dune__exe__Chat_tests.impl.d
$ (cd _build/default && /home/ferramenta/.opam/5.0.0/bin/ocamlc.opt -w @1..3@5..28@31..39@43@46..47@49..57@61..62@67@69-40 -strict-sequence -strict-formats -short-paths -keep-locs -g -bin-annot -I test/.test.eobjs/byte -I /home/ferramenta/.opam/5.0.0/lib/alcotest -I /home/ferramenta/.opam/5.0.0/lib/alcotest-lwt -I /home/ferramenta/.opam/5.0.0/lib/alcotest/engine -I /home/ferramenta/.opam/5.0.0/lib/alcotest/stdlib_ext -I /home/ferramenta/.opam/5.0.0/lib/astring -I /home/ferramenta/.opam/5.0.0/lib/base -I /home/ferramenta/.opam/5.0.0/lib/base/base_internalhash_types -I /home/ferramenta/.opam/5.0.0/lib/base/caml -I /home/ferramenta/.opam/5.0.0/lib/base/shadow_stdlib -I /home/ferramenta/.opam/5.0.0/lib/bytes -I /home/ferramenta/.opam/5.0.0/lib/cmdliner -I /home/ferramenta/.opam/5.0.0/lib/fmt -I /home/ferramenta/.opam/5.0.0/lib/logs -I /home/ferramenta/.opam/5.0.0/lib/lwt -I /home/ferramenta/.opam/5.0.0/lib/lwt/unix -I /home/ferramenta/.opam/5.0.0/lib/ocaml/str -I /home/ferramenta/.opam/5.0.0/lib/ocaml/threads -I /home/ferramenta/.opam/5.0.0/lib/ocaml/unix -I /home/ferramenta/.opam/5.0.0/lib/ocplib-endian -I /home/ferramenta/.opam/5.0.0/lib/ocplib-endian/bigstring -I /home/ferramenta/.opam/5.0.0/lib/re -I /home/ferramenta/.opam/5.0.0/lib/seq -I /home/ferramenta/.opam/5.0.0/lib/sexplib0 -I /home/ferramenta/.opam/5.0.0/lib/stdlib-shims -I /home/ferramenta/.opam/5.0.0/lib/uutf -I lib/.chat_lib.objs/byte -no-alias-deps -opaque -open Dune__exe -o test/.test.eobjs/byte/dune__exe__Chat_tests.cmo -c -impl test/chat_tests.ml)
$ (cd _build/default && /home/ferramenta/.opam/5.0.0/bin/ocamlopt.opt -w @1..3@5..28@31..39@43@46..47@49..57@61..62@67@69-40 -strict-sequence -strict-formats -short-paths -keep-locs -g -I test/.test.eobjs/byte -I test/.test.eobjs/native -I /home/ferramenta/.opam/5.0.0/lib/alcotest -I /home/ferramenta/.opam/5.0.0/lib/alcotest-lwt -I /home/ferramenta/.opam/5.0.0/lib/alcotest/engine -I /home/ferramenta/.opam/5.0.0/lib/alcotest/stdlib_ext -I /home/ferramenta/.opam/5.0.0/lib/astring -I /home/ferramenta/.opam/5.0.0/lib/base -I /home/ferramenta/.opam/5.0.0/lib/base/base_internalhash_types -I /home/ferramenta/.opam/5.0.0/lib/base/caml -I /home/ferramenta/.opam/5.0.0/lib/base/shadow_stdlib -I /home/ferramenta/.opam/5.0.0/lib/bytes -I /home/ferramenta/.opam/5.0.0/lib/cmdliner -I /home/ferramenta/.opam/5.0.0/lib/fmt -I /home/ferramenta/.opam/5.0.0/lib/logs -I /home/ferramenta/.opam/5.0.0/lib/lwt -I /home/ferramenta/.opam/5.0.0/lib/lwt/unix -I /home/ferramenta/.opam/5.0.0/lib/ocaml/str -I /home/ferramenta/.opam/5.0.0/lib/ocaml/threads -I /home/ferramenta/.opam/5.0.0/lib/ocaml/unix -I /home/ferramenta/.opam/5.0.0/lib/ocplib-endian -I /home/ferramenta/.opam/5.0.0/lib/ocplib-endian/bigstring -I /home/ferramenta/.opam/5.0.0/lib/re -I /home/ferramenta/.opam/5.0.0/lib/seq -I /home/ferramenta/.opam/5.0.0/lib/sexplib0 -I /home/ferramenta/.opam/5.0.0/lib/stdlib-shims -I /home/ferramenta/.opam/5.0.0/lib/uutf -I lib/.chat_lib.objs/byte -I lib/.chat_lib.objs/native -intf-suffix .ml -no-alias-deps -opaque -open Dune__exe -o test/.test.eobjs/native/dune__exe__Test.cmx -c -impl test/test.ml)
$ (cd _build/default && /home/ferramenta/.opam/5.0.0/bin/ocamlopt.opt -w @1..3@5..28@31..39@43@46..47@49..57@61..62@67@69-40 -strict-sequence -strict-formats -short-paths -keep-locs -g -I test/.test.eobjs/byte -I test/.test.eobjs/native -I /home/ferramenta/.opam/5.0.0/lib/alcotest -I /home/ferramenta/.opam/5.0.0/lib/alcotest-lwt -I /home/ferramenta/.opam/5.0.0/lib/alcotest/engine -I /home/ferramenta/.opam/5.0.0/lib/alcotest/stdlib_ext -I /home/ferramenta/.opam/5.0.0/lib/astring -I /home/ferramenta/.opam/5.0.0/lib/base -I /home/ferramenta/.opam/5.0.0/lib/base/base_internalhash_types -I /home/ferramenta/.opam/5.0.0/lib/base/caml -I /home/ferramenta/.opam/5.0.0/lib/base/shadow_stdlib -I /home/ferramenta/.opam/5.0.0/lib/bytes -I /home/ferramenta/.opam/5.0.0/lib/cmdliner -I /home/ferramenta/.opam/5.0.0/lib/fmt -I /home/ferramenta/.opam/5.0.0/lib/logs -I /home/ferramenta/.opam/5.0.0/lib/lwt -I /home/ferramenta/.opam/5.0.0/lib/lwt/unix -I /home/ferramenta/.opam/5.0.0/lib/ocaml/str -I /home/ferramenta/.opam/5.0.0/lib/ocaml/threads -I /home/ferramenta/.opam/5.0.0/lib/ocaml/unix -I /home/ferramenta/.opam/5.0.0/lib/ocplib-endian -I /home/ferramenta/.opam/5.0.0/lib/ocplib-endian/bigstring -I /home/ferramenta/.opam/5.0.0/lib/re -I /home/ferramenta/.opam/5.0.0/lib/seq -I /home/ferramenta/.opam/5.0.0/lib/sexplib0 -I /home/ferramenta/.opam/5.0.0/lib/stdlib-shims -I /home/ferramenta/.opam/5.0.0/lib/uutf -I lib/.chat_lib.objs/byte -I lib/.chat_lib.objs/native -intf-suffix .ml -no-alias-deps -opaque -open Dune__exe -o test/.test.eobjs/native/dune__exe__Chat_tests.cmx -c -impl test/chat_tests.ml)
$ (cd _build/default && /home/ferramenta/.opam/5.0.0/bin/ocamlopt.opt -w @1..3@5..28@31..39@43@46..47@49..57@61..62@67@69-40 -strict-sequence -strict-formats -short-paths -keep-locs -g -o test/test.exe /home/ferramenta/.opam/5.0.0/lib/lwt/lwt.cmxa /home/ferramenta/.opam/5.0.0/lib/ocplib-endian/ocplib_endian.cmxa /home/ferramenta/.opam/5.0.0/lib/ocplib-endian/bigstring/ocplib_endian_bigstring.cmxa /home/ferramenta/.opam/5.0.0/lib/ocaml/unix/unix.cmxa /home/ferramenta/.opam/5.0.0/lib/ocaml/threads/threads.cmxa /home/ferramenta/.opam/5.0.0/lib/lwt/unix/lwt_unix.cmxa -I /home/ferramenta/.opam/5.0.0/lib/lwt/unix /home/ferramenta/.opam/5.0.0/lib/logs/logs.cmxa /home/ferramenta/.opam/5.0.0/lib/base/base_internalhash_types/base_internalhash_types.cmxa -I /home/ferramenta/.opam/5.0.0/lib/base/base_internalhash_types /home/ferramenta/.opam/5.0.0/lib/base/caml/caml.cmxa /home/ferramenta/.opam/5.0.0/lib/sexplib0/sexplib0.cmxa /home/ferramenta/.opam/5.0.0/lib/base/shadow_stdlib/shadow_stdlib.cmxa /home/ferramenta/.opam/5.0.0/lib/base/base.cmxa -I /home/ferramenta/.opam/5.0.0/lib/base /home/ferramenta/.opam/5.0.0/lib/logs/logs_lwt.cmxa lib/chat_lib.cmxa /home/ferramenta/.opam/5.0.0/lib/fmt/fmt.cmxa /home/ferramenta/.opam/5.0.0/lib/astring/astring.cmxa /home/ferramenta/.opam/5.0.0/lib/cmdliner/cmdliner.cmxa /home/ferramenta/.opam/5.0.0/lib/uutf/uutf.cmxa /home/ferramenta/.opam/5.0.0/lib/alcotest/stdlib_ext/alcotest_stdlib_ext.cmxa /home/ferramenta/.opam/5.0.0/lib/fmt/fmt_cli.cmxa /home/ferramenta/.opam/5.0.0/lib/re/re.cmxa /home/ferramenta/.opam/5.0.0/lib/stdlib-shims/stdlib_shims.cmxa /home/ferramenta/.opam/5.0.0/lib/alcotest/engine/alcotest_engine.cmxa /home/ferramenta/.opam/5.0.0/lib/fmt/fmt_tty.cmxa /home/ferramenta/.opam/5.0.0/lib/alcotest/alcotest.cmxa -I /home/ferramenta/.opam/5.0.0/lib/alcotest /home/ferramenta/.opam/5.0.0/lib/alcotest-lwt/alcotest_lwt.cmxa /home/ferramenta/.opam/5.0.0/lib/ocaml/str/str.cmxa test/.test.eobjs/native/dune__exe.cmx test/.test.eobjs/native/dune__exe__Chat_tests.cmx test/.test.eobjs/native/dune__exe__Io_mock.cmx test/.test.eobjs/native/dune__exe__Io_handlers_tests.cmx test/.test.eobjs/native/dune__exe__Test.cmx)
$ (cd _build/default/test && ./test.exe)
> Testing `Testing chat'.
> This run has ID `84D46AMP'.
>
>   [OK]          IO_handlers (unit)          0   Handle output.
>   [OK]          IO_handlers (unit)          1   Handle input.
>   [OK]          IO_handlers (unit)          2   Send Message.
>   [OK]          IO_handlers (unit)          3   Handle Message.
>   [OK]          IO_handlers (unit)          4   Handle acknowledgment.
> Starting server...
> Error starting server. Please try again. Failure("Failed to create socket: it may already be in use."): > [FAIL]        Chat (integration)          0   test basic connection.
>
> ┌──────────────────────────────────────────────────────────────────────────────┐
> │ [FAIL]        Chat (integration)          0   test basic connection.         │
> └──────────────────────────────────────────────────────────────────────────────┘
> Server is not running.
> ASSERT Server should be alive
> File "test/chat_tests.ml", line 44, character 2:
> FAIL Server should be alive
>
>    Expected: `true'
>    Received: `false'
>
> Raised at Alcotest_engine__Test.check in file "src/alcotest-engine/test.ml", line 200, characters 4-261
> Called from Dune__exe__Chat_tests.test_basic_connection in file "test/chat_tests.ml", line 44, characters 2-69
> Called from Lwt.Sequential_composition.bind.create_result_promise_and_callback_if_deferred.callback in file "src/core/lwt.ml", line 1844, characters 16-19
>
> Logs saved to `~/Documents/personal/ahrefs/chat_ocaml/_build/default/test/_build/_tests/Testing chat/Chat U+0028integrationU+0029.000.output'.
>  ──────────────────────────────────────────────────────────────────────────────
>
> Full test results in `~/Documents/personal/ahrefs/chat_ocaml/_build/default/test/_build/_tests/Testing chat'.
> 1 failure! in 1.107s. 6 tests run.
[1]
